<file file_path=app/templates/users.html>
<!-- app/templates/users.html -->
{% extends "base.html" %}
<html lang="en"></html>

{% block title %}
Users - School Management App
{% endblock %}

{% block content %}
<h2>Users</h2>
<form method="GET" action="{{ url_for('main.users') }}">
    <div>
        {{ advanced_search_form.filter_field.label }} {{ advanced_search_form.filter_field() }}
    </div>
    <div>
        {{ advanced_search_form.filter_value.label }} {{ advanced_search_form.filter_value() }}
    </div>
    <button type="submit">Search</button>
</form>

<form method="POST" action="{{ url_for('main.batch_update') }}" class="batch-update-form">
    {{ advanced_search_form.hidden_tag() }}
    <table>
        <thead>
            <tr>
                <th>Select</th>
                <th>ID</th>
                <th>Name</th>
                <th><a href="{{ url_for('main.users', sort_by='grade', sort_order=sort_order=='asc' and 'desc' or 'asc') }}" class="sort-link">Grade</a></th>
                <th><a href="{{ url_for('main.users', sort_by='age', sort_order=sort_order=='asc' and 'desc' or 'asc') }}" class="sort-link">Age</a></th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td><input type="checkbox" name="user_ids" value="{{ user.id }}" class="user-checkbox"></td>
                <td>{{ user.id }}</td>
                <td>{{ user.first_name }} {{ user.last_name }}</td>
                <td>{{ user.student_profile.grade if user.student_profile else 'N/A' }}</td>
                <td>{{ user.student_profile.age if user.student_profile else 'N/A' }}</td>
                <td>
                    <a href="{{ url_for('main.edit_user', user_id=user.id) }}">Edit</a>
                    <form action="{{ url_for('main.delete_user', user_id=user.id) }}" method="post" style="display:inline;">
                        <a href="#" onclick="this.parentNode.submit(); return false;">Delete</a>
                    </form>
                    <a href="{{ url_for('main.user_profile', user_id=user.id) }}">Profile</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="batch-update-fields">
        {{ form.set_age.label }} {{ form.set_age() }}
    </div>
    <div class="batch-update-fields">
        {{ form.set_grade.label }} {{ form.set_grade() }}
    </div>
    <button type="submit" class="batch-update-button">Batch Update</button>
    <br><br><br><br>
</form>

<footer class="site-footer">
    <!-- Your footer content here -->
    
</footer>
{% endblock %}

</file>
